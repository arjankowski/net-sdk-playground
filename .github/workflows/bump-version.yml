name: Bump version

on:
  workflow_dispatch:
  push:
    branches:
      - main

jobs:
  bump-version:
    runs-on: windows-latest
    if: startsWith(github.event.pull_request.title, 'feat:') || startsWith(github.event.pull_request.title, 'fix:')

    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Setup git user
        run: |
          git config --global user.name "Mateusz Woda"
          git config --global user.email "mwoda@box.com"
      - shell: pwsh
        name: Bump version
        env:
          GithubToken: ${{ secrets.GH_TOKEN }}
        run: .\build\bump_version.ps1 -dr $false